import{a as ge}from"./chunk-RNCQOFKF.js";import{E as $,F as ee,H as te,I as ie,J as ne,K as oe,L as re,M as ae,N as se,P as le,Q as pe,R as ce,S as me,T as de,U as ue,a as G,c as U,d as Y,e as Z,f as X,g as q,h as J,i as K,j as Q}from"./chunk-T5CV32Z5.js";import{Cb as l,Eb as k,Gb as y,Hb as x,Ib as _,Nb as B,O as L,Q as N,Qa as p,Sa as O,T as I,Ua as W,W as m,X as R,Yb as H,_a as b,aa as u,ba as g,bc as z,db as w,ga as D,ja as F,jb as M,lb as v,ma as P,nb as A,qa as V,rb as s,sb as a,tb as f,ub as T,vb as h,wa as j,wb as c}from"./chunk-NMV4VB5V.js";import"./chunk-EQDQRRRY.js";function be(o,t){o&1&&(s(0,"div",32),f(1,"div",34),a())}function ve(o,t){if(o&1){let e=T();s(0,"div",33)(1,"div",35),h("click",function(){u(e);let n=c(2);return g(n.checkLogin())}),l(2,"Login"),a()()}if(o&2){let e=c(2);M("matRippleColor",e.rippleColor)}}function ke(o,t){if(o&1){let e=T();s(0,"div",13)(1,"p",4),l(2,"Air Cargo Tracking System"),a(),s(3,"p",17),l(4,"Welcome back to our air tracking system"),a(),s(5,"div",18)(6,"label",19),l(7,"Account"),a(),s(8,"input",20),h("input",function(n){u(e);let r=c();return g(r.typeAccount(n))}),_("ngModelChange",function(n){u(e);let r=c();return x(r.account,n)||(r.account=n),g(n)}),a()(),s(9,"div",21)(10,"label",22),l(11,"Password"),a(),s(12,"input",23),h("input",function(n){u(e);let r=c();return g(r.typeAccount(n))}),_("ngModelChange",function(n){u(e);let r=c();return x(r.password,n)||(r.password=n),g(n)}),a(),s(13,"p",24),l(14),a(),s(15,"div",25)(16,"div",26)(17,"input",27),_("ngModelChange",function(n){u(e);let r=c();return x(r.rememberMe,n)||(r.rememberMe=n),g(n)}),a(),s(18,"label",28),l(19,"Remember me"),a()(),s(20,"select",29)(21,"option",30),l(22,"\u4E2D\u6587"),a(),s(23,"option",31),l(24,"English"),a()()(),w(25,be,2,0,"div",32)(26,ve,3,1,"div",33),a()()}if(o&2){let e=c();p(8),v(e.typing?"":"border: 1px solid #ff3434"),y("ngModel",e.account),p(4),v(e.typing?"":"border: 1px solid #ff3434"),y("ngModel",e.password),p(2),k(" ",e.loginAlertMessage," "),p(3),y("ngModel",e.rememberMe),p(8),A(e.loading?25:26)}}function Se(o,t){if(o&1&&(s(0,"div",14)(1,"div",36)(2,"p",37),l(3),a(),s(4,"p",38),l(5,"Welcome back!"),a(),s(6,"div",39)(7,"div",40),l(8,"View your all shipments"),a()()()()),o&2){let e=c();p(3),k("Hi ",e.account,","),p(3),M("matRippleColor",e.rippleColor)}}var C=class o{router=m(J);authService=m(ue);cookieService=m(de);http=m(U);rippleColor="rgba(255, 255, 255, 0.1)";baseAPI=me.baseAPI;testData={StartDate:null,EndDate:null,Status:0,DateType:0,NumberType:0,TrackingNo:null,SortBy:"new_to_old",Page:1,PageSize:5};loading=!1;trackingNumber="";isValidTrackingNum=!1;alertMessage="";account="";password="";isLoginInput=!1;loginAlertMessage="";rememberMe=!1;typing=!0;isLogin=!1;linkToList="/shipment-list";trackingNumberService=m(ge);ngOnInit(){let t=this.cookieService.get("rememberMe"),e=this.cookieService.get("authToken");t==="true"?(this.rememberMe=t==="true",this.account=this.cookieService.get("account")):(this.rememberMe=!1,this.account=""),e&&this.tryGetData(this.testData)==!0?this.isLogin=!0:this.isLogin=!1}checkLogin(){if(this.loading=!0,this.checkLoginInput(this.account,this.password),!this.isLoginInput){this.loading=!1;return}this.authService.login(this.account,this.password,this.rememberMe).subscribe({next:t=>{let e=t.data,i=new Date;i.setDate(i.getDate()+7),this.cookieService.set("authToken",t.data,{path:"/",secure:!0,sameSite:"Strict"}),this.cookieService.set("account",this.account.toString(),{expires:i,path:"/",secure:!0,sameSite:"Strict"}),this.cookieService.set("rememberMe",this.rememberMe.toString(),{expires:i,path:"/",secure:!0,sameSite:"Strict"}),this.router.navigate(["/shipment-list"])},error:t=>{console.error("Login Failed:",t),this.loginAlertMessage="Login failed, please try again",this.isLoginInput=!1,this.typing=!1,this.loading=!1},complete:()=>{}})}checkLoginInput(t,e){t.trim()==""||e.trim()==""?(this.isLoginInput=!1,this.typing=!1,this.loginAlertMessage="Please enter your account and password"):(this.isLoginInput=!0,this.typing=!0)}typeAccount(t){this.typing=!0,this.loginAlertMessage=""}checkValid(t){t.target.value===""?(this.isValidTrackingNum=!1,this.alertMessage="the tracking number cannot be empty"):(this.isValidTrackingNum=!0,this.alertMessage="")}sendTrackingNumber(){this.isValidTrackingNum?(this.trackingNumberService.setData(this.trackingNumber),this.router.navigate(["/shipment-summary-guest"])):this.alertMessage="Please enter a valid tracking number"}logout(){this.authService.logout()}getData(t){let e=this.getCookie("authToken"),i=new G({"Content-Type":"application/json",Authorization:`Bearer ${e}`});return this.http.post(`${this.baseAPI}TrackingApi/search`,t,{headers:i})}tryGetData(t){let e=!1;return this.getData(t).subscribe({next:i=>{console.log("res",i),i.status===401?(this.router.navigate(["/login"]),e=!1):e=!0}}),e}getCookie(t){let e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-login"]],decls:24,vars:5,consts:[[1,"container","mx-auto","max-w-screen-xl","p-5","h-fit"],[1,"logo","flex"],["src","t3ex-logo.svg","alt","logo",1,"object-contain","w-[100px]"],[1,"greeting","pt-3","pl-3"],[1,"text-2xl","font-semibold"],[1,"grid","grid-cols-2","gap-5","pt-20"],[1,"trackingNum","p-10","border-r-2","flex","flex-col","justify-center"],[1,"text-blackColor/50","text-sm","pb-5"],[1,"inputBox","relative"],["placeholder","ex.12345678","type","text",1,"input","cursor-text","border","border-red-500",3,"keydown.enter","ngModelChange","input","ngModel"],[1,"absolute","text-sm","text-white","-top-7"],[1,"absolute","cursor-pointer","right-2","top-1/2","-translate-y-1/2","fill-current","text-blackColor",3,"click"],[1,"absolute","top-10","text-sm","text-red-500"],[1,"popUp","frame","flex","flex-col","bg-white","p-10","rounded-md"],[1,"h-[450px]","flex","flex-col","justify-center","items-center"],[1,"fixed","bottom-0","w-full"],[1,"pt-[200px]","w-full"],[1,"text-blackColor/50"],[1,"inputBox","pt-5"],["for","account","for","account",1,"text-sm","font-semibold"],["id","account","placeholder","Enter your account","type","text",1,"input","cursor-text","p-2","text-sm",3,"input","ngModelChange","ngModel"],[1,"inputBox","pt-2"],["for","password","for","password",1,"text-sm","font-semibold"],["id","password","type","password","placeholder","Enter your password",1,"input","cursor-text",3,"input","ngModelChange","ngModel"],[1,"absolute","text-sm","text-red-500"],[1,"pt-10","flex","justify-between","items-center"],[1,"remember"],["type","checkbox","id","remember",3,"ngModelChange","ngModel"],["for","remember",1,"pl-2","cursor-pointer"],["name","","id","",1,"border","rounded-sm","py-1","px-5","focus:border-blackColor","focus:outline-none"],["value","chinese"],["value","eng"],[1,"btn","cursor-pointer",2,"margin-top","30px","padding","7px","cursor","auto","background-color","black","opacity","0.5"],["matRipple","",1,"btn","cursor-pointer",2,"margin-top","30px",3,"matRippleColor"],[1,"mx-auto","w-5","h-5","mt-[2px]","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],[1,"cursor-pointer",3,"click"],[1,"w-[450px]"],[1,"text-blackColor","text-2xl","font-semibold"],[1,"text-blackColor","text-xl"],["routerLink","/shipment-list","matRipple","",1,"cursor-pointer","w-fit","py-2","px-5","bg-black/70","text-white","rounded-md",2,"margin-top","30px",3,"matRippleColor"],[1,"cursor-pointer"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1),f(2,"img",2),s(3,"div",3)(4,"p",4),l(5,"Tracking your shipment..."),a()()(),s(6,"div",5)(7,"div",6)(8,"p",4),l(9," Track your shipment with tracking number "),a(),s(10,"p",7),l(11," Enter the tracking number to track your shipment "),a(),s(12,"div",8)(13,"input",9),h("keydown.enter",function(){return i.sendTrackingNumber()}),_("ngModelChange",function(r){return x(i.trackingNumber,r)||(i.trackingNumber=r),r}),h("input",function(r){return i.checkValid(r)}),a(),s(14,"p",10),l(15,"\uFF08\u6E2C\u8A66\u7528\uFF09TECSHA126236"),a(),s(16,"mat-icon",11),h("click",function(){return i.sendTrackingNumber()}),l(17,"arrow_circle_right"),a(),s(18,"p",12),l(19),a()()(),w(20,ke,27,9,"div",13)(21,Se,9,2,"div",14),a()(),s(22,"div",15),f(23,"app-footer",16),a()),e&2&&(p(13),v(i.alertMessage!=""?"border: 1px solid #ff3434":""),y("ngModel",i.trackingNumber),p(6),k(" ",i.alertMessage," "),p(),A(i.isLogin?21:20))},dependencies:[ne,ie,te,ee,$,z,ce,le,pe,re,oe,ae,se,K],encapsulation:2})};var fe=[{path:"",component:C},{path:"login",component:C},{path:"shipment-summary",loadComponent:()=>import("./chunk-TSWFH3H3.js").then(o=>o.ShipmentSummaryComponent)},{path:"shipment-summary-guest",loadComponent:()=>import("./chunk-OAKNTD7U.js").then(o=>o.ShipmentSummaryGuestComponent)},{path:"shipment-list",loadComponent:()=>import("./chunk-HL3LZOJP.js").then(o=>o.ShipmentListComponent)}];var we="@",Me=(()=>{class o{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=m(D);loadingSchedulerFn=m(Ae,{optional:!0});_engine;constructor(e,i,n,r,d){this.doc=e,this.delegate=i,this.zone=n,this.animationType=r,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-IR6WX5W7.js").then(n=>n),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(n=>{throw new L(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc);let d=new r(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(e,i){let n=this.delegate.createRenderer(e,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let r=new E(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let _e=d.createRenderer(e,i);r.use(_e),this.scheduler??=this.injector.get(F,null,{optional:!0}),this.scheduler?.notify(11)}).catch(d=>{r.use(n)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(i){O()};static \u0275prov=N({token:o,factory:o.\u0275fac})}return o})(),E=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,n){this.delegate.insertBefore(t,e,i,n)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,n){this.delegate.setAttribute(t,e,i,n)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,n){this.delegate.setStyle(t,e,i,n)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,n){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i,n)),this.delegate.listen(t,e,i,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(we)}},Ae=new I("");function ye(o="animations"){return V("NgAsyncAnimations"),R([{provide:W,useFactory:(t,e,i)=>new Me(t,e,i,o),deps:[H,Z,P]},{provide:j,useValue:o==="noop"?"NoopAnimations":"BrowserAnimations"}])}var xe={providers:[B({eventCoalescing:!0}),Q(fe),ye(),Y()]};var S=class o{title="notice-template";static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&f(0,"router-outlet")},dependencies:[q],encapsulation:2})};X(S,xe).catch(o=>console.error(o));
