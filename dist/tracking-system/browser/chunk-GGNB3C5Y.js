import{a as ce}from"./chunk-RNCQOFKF.js";import{f as de}from"./chunk-B2RZ2SYW.js";import{E as P,F as ae,H as M,I as G,J as le,L as se,M as re,N as me,R as pe,S as N,b as E,c as A,g as oe}from"./chunk-VZI2L6LQ.js";import"./chunk-ZSSD5RUB.js";import{Cb as l,Db as u,Eb as S,Fb as H,Gb as X,Hb as Y,Ib as ee,Kb as I,Ma as z,Qa as a,Tb as te,W as b,_a as y,aa as _,ac as ie,ba as C,bc as ne,ca as J,da as Q,db as h,jb as k,k as q,mb as f,n as K,nb as c,ob as D,pb as T,qb as v,rb as n,sb as o,tb as d,ub as x,vb as g,wb as m,x as Z}from"./chunk-NMV4VB5V.js";import"./chunk-EQDQRRRY.js";var fe=()=>[1,2,3,4],_e=()=>[1,2,3,4,5];function Ce(i,t){if(i&1&&(n(0,"div",4),d(1,"div")(2,"div"),o()),i&2){let e=m(2);a(),f(e.skeletonClass),a(),f(e.skeletonClass)}}function xe(i,t){i&1&&(n(0,"div",0)(1,"div",3),T(2,Ce,3,4,"div",4,D),o(),d(4,"div",5),o()),i&2&&(a(2),v(I(0,fe)))}function ge(i,t){if(i&1&&(n(0,"div",1)(1,"div",6)(2,"p",7),l(3,"HAWB No."),o(),n(4,"p",8),l(5),o()(),n(6,"div",6)(7,"p",7),l(8,"MAWB No."),o(),n(9,"p",8),l(10),o()(),n(11,"div",9)(12,"p",7),l(13,"Origin"),o(),n(14,"p",10)(15,"span"),l(16),o()()(),n(17,"div",11)(18,"p",7),l(19,"Destination"),o(),n(20,"p",10)(21,"span"),l(22),o()()()()),i&2){let e=m();a(5),u(e.shipmentInfo.HAWBNo),a(5),u(e.shipmentInfo.MAWBNo),a(6),u(e.shipmentInfo.OriginCode),a(6),u(e.shipmentInfo.DestCode)}}function Se(i,t){if(i&1&&(n(0,"div",4),d(1,"div")(2,"div")(3,"div"),o()),i&2){let e=m(2);a(),f(e.skeletonClass),a(),f(e.skeletonClass),a(),f(e.skeletonClass)}}function De(i,t){if(i&1&&(n(0,"div",0)(1,"div",4),d(2,"div")(3,"div"),o(),n(4,"div",12),T(5,Se,4,6,"div",4,D),o()(),d(7,"div",13)),i&2){let e=m();a(2),f(e.skeletonClass),a(),f(e.skeletonClass),a(2),v(I(4,_e))}}function Te(i,t){if(i&1&&d(0,"div"),i&2){let e=m(3);f(e.skeletonClass)}}function ve(i,t){if(i&1&&d(0,"div",21),i&2){let e=m().$implicit,s=m(2);k("ngClass",s.getLineClass(e.title))}}function ke(i,t){if(i&1&&(n(0,"p",24),l(1),o()),i&2){let e=m().$implicit;a(),u(e.dateTime)}}function ye(i,t){if(i&1&&(n(0,"p",17),l(1,"Flight No."),o(),n(2,"p",24),l(3),o(),n(4,"p",17),l(5,"Origin / Destination"),o(),n(6,"p",24)(7,"span"),l(8),o(),l(9," / "),n(10,"span"),l(11),o()()),i&2){let e=m().$implicit;a(3),u(e.flightNo),a(5),u(e.originCode),a(3),u(e.destCode)}}function be(i,t){i&1&&(n(0,"div",25),l(1," View Images "),o())}function Ie(i,t){if(i&1&&(n(0,"div",14)(1,"div",18)(2,"mat-icon",19),l(3),o(),h(4,Te,1,2,"div",20)(5,ve,1,1,"div",21),o(),n(6,"div",22)(7,"p",23),l(8),o(),h(9,ke,2,1,"p",24)(10,ye,12,3)(11,be,2,0,"div",25),o()()),i&2){let e=t.$implicit,s=m(2);a(2),k("ngClass",s.getStatusClass(e.title)),a(),u(e.icon),a(),c(s.isSkeletonLoading?4:5),a(4),S(" ",e.title," "),a(),c(e.dateTime?9:-1),a(),c(e.flightNo&&e.flightNo!=null?10:-1),a(),c(e.imgUrls&&e.flightNo!=null?11:-1)}}function Ee(i,t){if(i&1&&(n(0,"div",2),T(1,Ie,12,7,"div",14,D),n(3,"div",15)(4,"mat-icon",16),l(5,"task_alt"),o(),n(6,"p",17),l(7,"Completed"),o()()()),i&2){let e=m();a(),v(e.processList),a(3),f(e.lastStatus=="Completed"?"text-primary":"text-blackColor/40")}}var B=class i{http=b(A);rippleColor="rgba(0, 0, 0, 0.1)";skeletonClass="w-full h-5 rounded bg-gradient-to-r from-gray-50 via-gray-100 to-gray-50 bg-[length:200%_100%] animate-[shimmer_1.5s_infinite_linear]";alertMessage="No data available";isSkeletonLoading=!0;hasData=!0;processList=[{title:"Booking Creation",icon:"inventory"},{title:"ETD",icon:"package_2"},{title:"ATD",icon:"box"},{title:"ETA",icon:"flight_land"},{title:"ATA",icon:"event_available"}];summaryDataGuestAPI=N.baseAPI;trackingNo="";shipmentData=[];shipmentInfo={};milestones={};processTimeList=[];lastStatus="";lastTime=new Date;isCompleted=!1;getSummaryData(t){return this.http.get(`${this.summaryDataGuestAPI}TrackingApi/shipmentSummary`,{params:new E().set("trackingNo",t)})}ngOnInit(){this.getSummaryData(this.trackingNo).subscribe({next:t=>{this.isSkeletonLoading=!1,this.shipmentData=t,this.shipmentData.data.code!="0"&&(this.shipmentInfo=this.shipmentData.data.ShipmentDetails.ShipmentInfo,this.milestones=this.shipmentData.data.Milestone,this.lastStatus=this.isCompleteStatus(this.shipmentData.data.MilestoneNode),this.processList=this.processListData(),this.isSkeletonLoading=!1)},error:t=>{console.log("error!!!!!Q_Q",t),this.isSkeletonLoading=!1},complete:()=>{}})}processListData(){let t=JSON.parse(JSON.stringify(this.processList));return t.forEach(e=>{e.title==="Booking Creation"?this.milestones.BookingCreation=="null"&&this.milestones.AirportPickup=="null"?e.dateTime="":this.milestones.BookingCreation=="null"&&this.milestones.AirportPickup!="null"?e.dateTime=this.replaceChineseToEnglish(this.milestones.AirportPickup):e.dateTime=this.replaceChineseToEnglish(this.milestones.BookingCreation):e.title==="ETD"?(e.dateTime=this.replaceChineseToEnglish(this.milestones.ETD.DateTime),e.originCode=this.milestones.ETD.OriginCode,e.destCode=this.milestones.ETD.DestCode,e.flightNo=this.milestones.ETD.FlightNo):e.title==="ATD"?e.dateTime=this.replaceChineseToEnglish(this.milestones.ATD):e.title==="ETA"?(e.dateTime=this.replaceChineseToEnglish(this.milestones.ETA.DateTime),e.originCode=this.milestones.ETA.OriginCode,e.destCode=this.milestones.ETA.DestCode,e.flightNo=this.milestones.ETA.FlightNo):e.title==="ATA"&&(e.dateTime=this.replaceChineseToEnglish(this.milestones.ATA))}),t}replaceChineseToEnglish(t){if(!t)return t;let e=t.match(/(\d{4})[-年](\d{1,2})[-月](\d{1,2})[日\s]+(\d{1,2}):(\d{1,2})/);if(!e)return t;let[,s,p,r,O,w]=e.map(Number),j=new Date(s,p-1,r,O,w),U={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};return new Intl.DateTimeFormat("en-US",U).format(j)}isCompleteStatus(t){let e="Booking Creation";return t==="BookingCreation"?e="Booking Creation":t==="ETD"||t==="ATD"||t==="ETA"||t==="ATA"?e=t:t==="Pod"&&(e="Completed"),e}getStatusClass(t){let e=["Booking Creation","ETD","ATD","ETA","ATA","Completed"];return this.lastStatus===t||{"Booking Creation":["Booking Creation"],ETD:["Booking Creation","ETD"],ATD:["Booking Creation","ETD","ATD"],ETA:["Booking Creation","ETD","ATD","ETA"],ATA:["Booking Creation","ETD","ATD","ETA","ATA"],Completed:["Booking Creation","ETD","ATD","ETA","ATA","Completed"]}[this.lastStatus]?.includes(t)?"text-primary":"text-blackColor/40"}getLineClass(t){let e=["Booking Creation","ETD","ATD","ETA","ATA","Completed"];return this.lastStatus===t||{"Booking Creation":["Booking Creation"],ETD:["Booking Creation","ETD"],ATD:["Booking Creation","ETD","ATD"],ETA:["Booking Creation","ETD","ATD","ETA"],ATA:["Booking Creation","ETD","ATD","ETA","ATA"],Completed:["Booking Creation","ETD","ATD","ETA","ATA","Completed"]}[this.lastStatus]?.includes(t)?"bg-primary":"bg-blackColor/40"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-shipment-details-guest"]],inputs:{trackingNo:"trackingNo"},decls:4,vars:2,consts:[[1,"skeleton-loading","p-10"],[1,"mainInfo","flex","gap-x-28","justify-start","p-10","border-b-[1px]","border-blackColor/20"],[1,"process","flex","justify-between","items-start","p-10"],[1,"grid","grid-cols-4","gap-5"],[1,"flex","flex-col","gap-5"],[1,"border-b-[1px]","border-blackColor/20","py-5"],["id","HAWBno"],[1,"text-blackColor/50","font-medium"],[1,"text-2xl","font-semibold"],["id","origin"],[1,"font-medium","text-2xl"],["id","destination"],[1,"grid","grid-cols-5","gap-5","pt-5"],[1,"w-full","border-b-[1px]","border-blackColor/20","py-5"],[1,"process-item","w-full"],[1,"completed"],[1,"material-symbols-outlined","text-[45px]","transition-all","duration-300","text-blackColor/40",2,"height","50px","width","60px"],[1,"text-blackColor/50","font-medium","mb-0"],[1,"icons","flex","justify-between","items-center"],[1,"material-symbols-outlined","text-[45px]","transition-all","duration-500",2,"height","50px","width","60px",3,"ngClass"],[3,"class"],[1,"line","w-full","h-[3px]","transition-all","duration-500",3,"ngClass"],[1,"description"],[1,"text-blackColor/50","font-medium","text-lg","mb-2"],[1,"mt-0"],["matRipple","",1,"btn-outline",2,"width","fit-content"]],template:function(e,s){e&1&&h(0,xe,5,1,"div",0)(1,ge,23,4,"div",1)(2,De,8,5)(3,Ee,8,2,"div",2),e&2&&(c(s.isSkeletonLoading?0:1),a(2),c(s.isSkeletonLoading?2:3))},dependencies:[G,M,ae,P,ne,ie],encapsulation:2})};var Ae=()=>[1,2,3];function Me(i,t){if(i&1&&(n(0,"div",3),d(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),o()),i&2){let e=m(2);a(),f(e.skeletonClass),a(),f(e.skeletonClass),a(),f(e.skeletonClass),a(),f(e.skeletonClass),a(),f(e.skeletonClass)}}function Ge(i,t){i&1&&(n(0,"div",0)(1,"div",2),T(2,Me,6,10,"div",3,D),o(),d(4,"div",4),o()),i&2&&(a(2),v(I(0,Ae)))}function Ne(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.ShipmentInfo.MAWBNo,p))}),l(1,"content_copy"),o()}}function Oe(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.ShipmentInfo.HAWBNo,p))}),l(1,"content_copy"),o()}}function we(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.ShipDate,p))}),l(1,"content_copy"),o()}}function Pe(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.TradingType,p))}),l(1,"content_copy"),o()}}function Be(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.Payment,p))}),l(1,"content_copy"),o()}}function Ve(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.Package.PKG+" "+r.shipmentDetails.Package.PKG_UNIT,p))}),l(1,"content_copy"),o()}}function Fe(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.Package.GW+" "+r.shipmentDetails.Package.GW_UNIT,p))}),l(1,"content_copy"),o()}}function Le(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.Package.VW+" "+r.shipmentDetails.Package.VW_UNIT,p))}),l(1,"content_copy"),o()}}function We(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.Package.CW+" "+r.shipmentDetails.Package.CW_UNIT,p))}),l(1,"content_copy"),o()}}function Re(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.ShipmentInfo.OriginCode+" - "+r.shipmentDetails.ShipmentInfo.OriginCity+", "+r.shipmentDetails.ShipmentInfo.OriginCountry,p))}),l(1,"content_copy"),o()}}function He(i,t){if(i&1){let e=x();n(0,"mat-icon",16),g("click",function(p){_(e);let r=m(2);return C(r.copyText(r.shipmentDetails.ShipmentInfo.DestCode+" - "+r.shipmentDetails.ShipmentInfo.DestCity+", "+r.shipmentDetails.ShipmentInfo.DestCountry,p))}),l(1,"content_copy"),o()}}function $e(i,t){if(i&1&&(n(0,"div",1)(1,"div",5)(2,"table")(3,"tbody")(4,"tr",6)(5,"td",7),l(6,"MAWB No."),o(),n(7,"td",8),l(8),n(9,"span",9),h(10,Ne,2,0,"mat-icon",10),o()()(),n(11,"tr",6)(12,"td",7),l(13,"HAWB No."),o(),n(14,"td",8),l(15),n(16,"span",9),h(17,Oe,2,0,"mat-icon",10),o()()(),d(18,"tr",11),n(19,"tr",6)(20,"td",7),l(21,"Ship Date"),o(),n(22,"td",8),l(23),n(24,"span",9),h(25,we,2,0,"mat-icon",10),o()()(),n(26,"tr",6)(27,"td",7),l(28,"Trading Type"),o(),n(29,"td",8),l(30),n(31,"span",9),h(32,Pe,2,0,"mat-icon",10),o()()(),n(33,"tr",6)(34,"td",7),l(35,"Payment"),o(),n(36,"td",8),l(37),n(38,"span",9),h(39,Be,2,0,"mat-icon",10),o()()(),d(40,"tr",11),n(41,"tr",6)(42,"td",7),l(43,"PKG"),o(),n(44,"td",8),l(45),n(46,"span",9),h(47,Ve,2,0,"mat-icon",10),o()()(),n(48,"tr",6)(49,"td",7),l(50,"GW"),o(),n(51,"td",8),l(52),n(53,"span",9),h(54,Fe,2,0,"mat-icon",10),o()()(),n(55,"tr",6)(56,"td",7),l(57,"VW"),o(),n(58,"td",8),l(59),n(60,"span",9),h(61,Le,2,0,"mat-icon",10),o()()(),n(62,"tr",6)(63,"td",7),l(64,"CW"),o(),n(65,"td",8),l(66),n(67,"span",9),h(68,We,2,0,"mat-icon",10),o()()()()()(),n(69,"ul")(70,"li",12)(71,"p",13),l(72,"Origin"),o(),n(73,"p",14)(74,"span",15),l(75),o(),l(76," - "),n(77,"span"),l(78),o(),n(79,"span",9),h(80,Re,2,0,"mat-icon",10),o()()(),n(81,"li",7)(82,"p",13),l(83,"Destination"),o(),n(84,"p",14)(85,"span",15),l(86),o(),l(87," - "),n(88,"span"),l(89),o(),n(90,"span",9),h(91,He,2,0,"mat-icon",10),o()()()()()),i&2){let e=m();a(8),S(" ",e.shipmentDetails.ShipmentInfo.MAWBNo||"-"," "),a(2),c(e.shipmentDetails.ShipmentInfo.MAWBNo?10:-1),a(5),S(" ",e.shipmentDetails.ShipmentInfo.HAWBNo||"-"," "),a(2),c(e.shipmentDetails.ShipmentInfo.HAWBNo?17:-1),a(6),S(" ",e.shipmentDetails.ShipDate||"-"," "),a(2),c(e.shipmentDetails.ShipDate?25:-1),a(5),S(" ",e.shipmentDetails.TradingType||"-"," "),a(2),c(e.shipmentDetails.TradingType?32:-1),a(5),S(" ",e.shipmentDetails.Payment||"-"," "),a(2),c(e.shipmentDetails.Payment?39:-1),a(6),S(" ",e.shipmentDetails.Package.PKG+" "+e.shipmentDetails.Package.PKG_UNIT||"-"," "),a(2),c(e.shipmentDetails.Package.PKG?47:-1),a(5),S(" ",e.shipmentDetails.Package.GW+" "+e.shipmentDetails.Package.GW_UNIT||"-"," "),a(2),c(e.shipmentDetails.Package.GW?54:-1),a(5),S(" ",e.shipmentDetails.Package.VW+" "+e.shipmentDetails.Package.VW_UNIT||"-"," "),a(2),c(e.shipmentDetails.Package.VW?61:-1),a(5),S(" ",e.shipmentDetails.Package.CW+" "+e.shipmentDetails.Package.CW_UNIT||"-"," "),a(2),c(e.shipmentDetails.Package.CW?68:-1),a(7),u(e.shipmentDetails.ShipmentInfo.OriginCode||"\u2013"),a(3),H("",e.shipmentDetails.ShipmentInfo.OriginCity||"\u2013",", ",e.shipmentDetails.ShipmentInfo.OriginCountry||"\u2013",""),a(2),c(e.shipmentDetails.ShipmentInfo.OriginCode||e.shipmentDetails.ShipmentInfo.OriginCity||e.shipmentDetails.ShipmentInfo.OriginCountry?80:-1),a(6),u(e.shipmentDetails.ShipmentInfo.DestCode||"\u2013"),a(3),H("",e.shipmentDetails.ShipmentInfo.DestCity||"\u2013",", ",e.shipmentDetails.ShipmentInfo.DestCountry||"\u2013",""),a(2),c(e.shipmentDetails.ShipmentInfo.DestCode||e.shipmentDetails.ShipmentInfo.DestCity||e.shipmentDetails.ShipmentInfo.DestCountry?91:-1)}}var L=class i{rippleColor="rgba(0, 0, 0, 0.1)";skeletonClass="w-full h-5 rounded bg-gradient-to-r from-gray-50 via-gray-100 to-gray-50 bg-[length:200%_100%] animate-[shimmer_1.5s_infinite_linear]";http=b(A);isSkeletonLoading=!0;shipmentData=[];shipmentDetails=[];trackingNo="";summaryDataGuestAPI=N.baseAPI;getSummaryData(t){return this.http.get(`${this.summaryDataGuestAPI}TrackingApi/shipmentSummary`,{params:new E().set("trackingNo",t)})}ngOnInit(){this.getSummaryData(this.trackingNo).subscribe({next:t=>{this.isSkeletonLoading=!1,this.shipmentData=t,this.shipmentDetails=this.shipmentData.data.ShipmentDetails},error:t=>{console.log(t),this.isSkeletonLoading=!1}})}copyText(t,e){if(!t)return;navigator.clipboard.writeText(t).then(()=>{console.log("clipboard:",t)});let s=e.target.closest(".copyIcon");if(!s||!s.parentElement)return;let p=document.createElement("span");p.textContent="Copied!",p.className="absolute inline-block ml-2 px-2 py-1 bg-blackColor/30 bg-opacity-75 text-white rounded text-sm opacity-100 transition-opacity duration-500",s.parentElement.insertBefore(p,s.nextSibling),setTimeout(()=>{p.classList.add("opacity-0"),setTimeout(()=>p.remove(),400)})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-shipment-other-info-details-guest"]],inputs:{trackingNo:"trackingNo"},decls:2,vars:1,consts:[[1,"skeleton-loading","p-0"],[1,"grid","grid-cols-[0.7fr_1fr]","gap-3"],[1,"grid","grid-cols-3","gap-3"],[1,"flex","flex-col","gap-10"],[1,"border-b-[1px]","border-blackColor/20","py-5"],[1,"col-left","p-1"],[1,"p-1","align-top"],[1,"text-lg","font-bold","p-1"],[1,"text-lg","font-normal","p-1","text-blackColor/60"],[1,"relative"],[1,"copyIcon","text-[16px]","relative","top-[8px]","left-[2px]","hover:text-blackColor","cursor-pointer","text-blackColor/30"],[1,"h-5"],[1,"p-1"],[1,"text-lg","font-bold"],[1,"relative","text-lg","font-normal","text-blackColor/60"],[1,"font-bold"],[1,"copyIcon","text-[16px]","relative","top-[8px]","left-[2px]","hover:text-blackColor","cursor-pointer","text-blackColor/30",3,"click"]],template:function(e,s){e&1&&h(0,Ge,5,1,"div",0)(1,$e,92,26,"div",1),e&2&&c(s.isSkeletonLoading?0:1)},dependencies:[G,M],encapsulation:2})};var he=()=>[1,2,3];function je(i,t){if(i&1&&(n(0,"div",5),d(1,"div"),o()),i&2){let e=m(2);a(),f(e.skeletonClass)}}function Ue(i,t){i&1&&(n(0,"div",3)(1,"div",4),T(2,je,2,2,"div",5,D),o(),d(4,"div",6),o()),i&2&&(a(2),v(I(0,he)))}function qe(i,t){if(i&1&&(n(0,"th",9),l(1),o()),i&2){let e=t.$implicit;a(),u(e)}}function Ke(i,t){if(i&1&&(n(0,"tr",10)(1,"td",11),l(2),o(),n(3,"td",11),l(4),o(),n(5,"td",11),l(6),o()()),i&2){let e=t.$implicit,s=t.$index;a(2),u(s+1),a(2),u(e.Milestone),a(2),S(" ",e.DateTime," ")}}function Ze(i,t){if(i&1&&(n(0,"table",7)(1,"thead")(2,"tr",8),T(3,qe,2,1,"th",9,D),o()(),n(5,"tbody"),T(6,Ke,7,3,"tr",10,D),o()()),i&2){let e=m(2);a(3),v(e.milestoneCols),a(3),v(e.milestones)}}function Je(i,t){i&1&&(n(0,"div")(1,"p",12)(2,"mat-icon",13),l(3,"search"),o(),l(4," No data found. "),o()())}function Qe(i,t){if(i&1&&h(0,Ze,8,0,"table",7)(1,Je,5,0,"div"),i&2){let e=m();c(e.milestoneCols.length>0?0:1)}}function ze(i,t){if(i&1&&(n(0,"div",5),d(1,"div"),o()),i&2){let e=m(2);a(),f(e.skeletonClass)}}function Xe(i,t){i&1&&(n(0,"div",3)(1,"div",4),T(2,ze,2,2,"div",5,D),o(),d(4,"div",6),o()),i&2&&(a(2),v(I(0,he)))}function Ye(i,t){if(i&1&&(n(0,"th",15),l(1),o()),i&2){let e=t.$implicit;a(),u(e)}}function et(i,t){if(i&1&&(n(0,"tr",10)(1,"td",11),l(2),o(),n(3,"td",11),l(4),o(),n(5,"td",11),l(6),o(),n(7,"td",11),l(8),o(),n(9,"td",11),l(10),o(),n(11,"td",11),l(12),o(),n(13,"td",11),l(14),o()()),i&2){let e=t.$implicit;a(2),u(e.SeqNo||"-"),a(2),u(e.OriginCode||"-"),a(2),u(e.DestCode||"-"),a(2),u(e.ETD||"-"),a(2),u(e.ATD||"-"),a(2),u(e.ETA||"-"),a(2),u(e.ATA||"-")}}function tt(i,t){if(i&1&&(n(0,"table",14)(1,"thead")(2,"tr",8),T(3,Ye,2,1,"th",15,D),o()(),n(5,"tbody"),T(6,et,15,7,"tr",10,D),o()()),i&2){let e=m(2);a(3),v(e.flightCols),a(3),v(e.flightSegments)}}function it(i,t){i&1&&(n(0,"div")(1,"p",12)(2,"mat-icon",13),l(3,"search"),o(),l(4," No data found. "),o()())}function nt(i,t){if(i&1&&h(0,tt,8,0,"table",14)(1,it,5,0,"div"),i&2){let e=m();c(e.flightCols.length!==0?0:1)}}var W=class i{http=b(A);skeletonClass="w-full h-5 rounded bg-gradient-to-r from-gray-50 via-gray-100 to-gray-50 bg-[length:200%_100%] animate-[shimmer_1.5s_infinite_linear]";isSkeletonLoading=!0;milestoneCols=["Order","Milestone","Date and Time"];milestonRows=["Booking Creation","Cargo Arrive Terminal","ETD","ATD","ETA","ATA","Document Release","Release","Airport Pickup","Delivered","POD"];flightCols=["Flight No.","From","To","ETD","ATD","ETA","ATA"];shipmentData=[];milestones=[];milestonesCols=["Booking Creation","Cargo Arrive Terminal","ETD","ATD","ETA","ATA","Document Release","Release","Airport Pickup","Delivered","POD"];dimensions=[];unit={};flightSegments=[];baseAPI=N.baseAPI;trackingNo="";getMilestonesData(t){return this.http.get(`${this.baseAPI}TrackingApi/shipmentSummary`,{params:new E().set("trackingNo",t)})}ngOnInit(){this.getMilestonesData(this.trackingNo).subscribe({next:t=>{this.isSkeletonLoading=!1,this.shipmentData=t,this.flightSegments=this.shipmentData.data.FlightSegments,this.milestones=this.aryMilestones(this.shipmentData.data.Milestone),this.unit=this.shipmentData.data.ShipmentDetails.Package,this.isSkeletonLoading=!1},error:t=>{console.log(t),this.isSkeletonLoading=!1},complete:()=>{}})}objToAry(t){return t?Object.entries(t).map(([s,p])=>({key:s,value:p})):[]}aryMilestones(t){let e=[];return this.milestonRows.forEach(s=>{s==="Booking Creation"?e.push({Milestone:s,DateTime:t?.BookingCreation??""}):s==="Cargo Arrive Terminal"?e.push({Milestone:s,DateTime:t?.CargoArrive?.DateTime??""}):s==="ETD"?e.push({Milestone:s,DateTime:t?.ETD.DateTime??""}):s==="ATD"?e.push({Milestone:s,DateTime:t?.ATD??""}):s==="ETA"?e.push({Milestone:s,DateTime:t?.ETA.DateTime??""}):s==="ATA"?e.push({Milestone:s,DateTime:t?.ATA??""}):s==="Document Release"?t.DocReleaseDate!=null&&t.DocReleaseDate!=""&&t.DocReleaseDate!="undefined"&&e.push({Milestone:s,DateTime:t?.DocReleaseDate??""}):s==="Release"?t.ReleaseDate!=null&&t.ReleaseDate!=""&&t.ReleaseDate!="undefined"&&e.push({Milestone:s,DateTime:t?.ReleaseDate??""}):s==="Airport Pickup"?e.push({Milestone:s,DateTime:t?.AirportPickup?.DateTime??""}):s==="Delivered"?e.push({Milestone:s,DateTime:t?.Delivered?.DateTime??""}):s==="POD"&&e.push({Milestone:s,DateTime:t?.Pod?.DateTime??""})}),e}replaceChineseToEnglish(t){if(!t)return t;let e=t.match(/(\d{4})年(\d{1,2})月(\d{1,2})日\s+(\d{1,2}):(\d{1,2})/);if(!e)return t;let[,s,p,r,O,w]=e.map(Number),j=new Date(s,p-1,r,O,w);return`${s}-${String(p).padStart(2,"0")}-${String(r).padStart(2,"0")} ${String(O).padStart(2,"0")}:${String(w).padStart(2,"0")}`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-shipment-other-info-milestones-guest"]],inputs:{trackingNo:"trackingNo"},decls:14,vars:2,consts:[[1,"title","flex","items-center","gap-2"],[1,"text-blackColor/50"],[1,"text-lg","text-blackColor/90","font-semibold"],[1,"skeleton-loading","pt-5"],[1,"grid","grid-cols-1","gap-5"],[1,"flex","flex-col","gap-5"],[1,"border-b-[1px]","border-blackColor/20","py-5"],[1,"w-full","border-collapse","mb-8"],[1,"text-blackColor/90","font-semibold","bg-blackColor/5"],[1,"px-4","py-4","text-start","w-auto"],[1,"text-blackColor/70","font-normal","border-b"],[1,"px-4","py-2","text-start"],[1,"text-blackColor/50","text-sm","px-5","flex"],[1,"text-blackColor/50","text-[18px]"],[1,"w-full","border-collapse","mb-8","table-fixed"],[1,"px-4","py-4","text-start"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"mat-icon",1),l(2,"folder"),o(),n(3,"p",2),l(4,"Milestones"),o()(),h(5,Ue,5,1,"div",3)(6,Qe,2,1),n(7,"div",0)(8,"mat-icon",1),l(9,"folder"),o(),n(10,"p",2),l(11,"Flight Info"),o()(),h(12,Xe,5,1,"div",3)(13,nt,2,1)),e&2&&(a(5),c(s.isSkeletonLoading?5:6),a(7),c(s.isSkeletonLoading?12:13))},dependencies:[G,M],encapsulation:2})};function ot(i,t){if(i&1){let e=x();n(0,"p",8),g("click",function(){let p=_(e),r=p.$implicit,O=p.$index,w=m();return C(w.menuSelected(r,O))}),l(1),o()}if(i&2){let e=t.$implicit,s=m();f(s.selectedMenu===e?"":" text-blackColor/50"),a(),S(" ",e," ")}}function at(i,t){if(i&1&&d(0,"app-shipment-other-info-details-guest",7),i&2){let e=m();k("trackingNo",e.trackingNo)}}function lt(i,t){if(i&1&&d(0,"app-shipment-other-info-milestones-guest",7),i&2){let e=m();k("trackingNo",e.trackingNo)}}var R=class i{menu=["Shipment Details","Milestones"];selectedMenu="Shipment Details";users=[];trackingNo="";menuSelected(t,e){this.selectedMenu=t}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-shipment-other-info-guest"]],inputs:{trackingNo:"trackingNo"},decls:10,vars:4,consts:[[1,"otherDetails","pt-3","pb-[50px]"],[1,"bg-white","rounded-md","p-10"],[1,"detail-menu","flex","justify-between","mb-5","border-b-2"],[1,"flex","gap-x-2","relative"],[1,"cursor-pointer","text-xl","transition-all","font-semibold","hover:text-blackColor/90","py-0","pb-3","px-3","mr-1","m-0",3,"class"],[1,"absolute","border-b-4","pt-[38px]","transition-all"],[1,"min-h-[380px]"],[3,"trackingNo"],[1,"cursor-pointer","text-xl","transition-all","font-semibold","hover:text-blackColor/90","py-0","pb-3","px-3","mr-1","m-0",3,"click"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),T(4,ot,2,3,"p",4,D),d(6,"div",5),o()(),n(7,"div",6),h(8,at,1,1,"app-shipment-other-info-details-guest",7)(9,lt,1,1,"app-shipment-other-info-milestones-guest",7),o()()()),e&2&&(a(4),v(s.menu),a(2),f(s.selectedMenu==="Shipment Details"?"border-primary w-[180px]":s.selectedMenu==="Milestones"?"border-primary translate-x-[185px] w-[125px]":"border-white"),a(2),c(s.selectedMenu==="Shipment Details"?8:-1),a(),c(s.selectedMenu==="Milestones"?9:-1))},dependencies:[L,W],encapsulation:2})};function st(i,t){i&1&&(n(0,"div",8),d(1,"div",12),o())}function rt(i,t){if(i&1){let e=x();n(0,"div",13),g("click",function(){_(e);let p=m();return C(p.sendTrackingNumber())}),l(1," Search "),o()}if(i&2){let e=m();k("matRippleColor",e.rippleColor)}}function mt(i,t){if(i&1&&(n(0,"div",11)(1,"div",14)(2,"span",15),J(),n(3,"svg",16),d(4,"path",17),o()(),Q(),d(5,"p",18),o()()),i&2){let e=m();a(5),k("innerHTML",e.errorMessages,z)}}function pt(i,t){if(i&1&&(n(0,"div",19),d(1,"app-shipment-details-guest",20),o(),n(2,"div",21),d(3,"app-shipment-other-info-guest",20),o()),i&2){let e=m();a(),k("trackingNo",e.trackingNumber),a(2),k("trackingNo",e.trackingNumber)}}var ue=class i{http=b(A);rippleColor="rgba(255, 255, 255, 0.2)";trackingNumber="";data={};errorMessages="Please enter a valid tracking number";loading=!1;hasData=!1;trackingNumberService=b(ce);summaryDataGuestAPI=N.baseAPI;constructor(){te(()=>{this.trackingNumber=this.trackingNumberService.getData()(),this.trackingNumber&&this.fetchShipmentData()})}ngInit(){}getSummaryData(t){return this.http.get(`${this.summaryDataGuestAPI}TrackingApi/shipmentSummary`,{params:new E().set("trackingNo",t)})}fetchShipmentData(){this.loading=!0,this.getSummaryData(this.trackingNumber).pipe(K(15e3),Z(t=>(this.hasData=!1,this.loading=!1,this.errorMessages="Request timed out. Please try again later.",q(()=>t)))).subscribe({next:t=>{this.data=t;let e=this.data.data.Milestone;if(!this.data&&!this.data.ok){console.warn("\u932F\u8AA4\uFF01",t),this.hasData=!1,this.loading=!1,this.errorMessages="No data found.<br/>  Please check your tracking number.";return}this.hasData=!0,this.loading=!1},error:t=>{console.error("error:",t),this.hasData=!1,this.errorMessages="Data not found.",this.loading=!1}})}sendTrackingNumber(){this.loading=!0,this.trackingNumber.trim()===""?(this.hasData=!1,this.errorMessages="Please enter a valid tracking number",this.loading=!1):(this.trackingNumberService.setData(this.trackingNumber),this.fetchShipmentData(),this.loading=!1)}getCookie(t){let e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["app-shipment-summary-guest"]],decls:19,vars:5,consts:[[1,"bg-blackColor/5"],[1,"container","mx-auto","max-w-screen-xl","p-3"],[1,"greeting","py-3"],[1,"font-semibold","text-3xl","text-blackColor"],[1,"text-blackColor/70"],[1,"search"],[1,"search","relative","flex","items-center","w-[400px]","pb-10"],["placeholder","Enter your tracking number","id","search","type","text",1,"focus:outline-blackColor","focus:bg-white","p-1","pl-8","w-full","rounded-md",3,"ngModelChange","ngModel"],[1,"w-[160px]","h-8","bg-blackColor/60","text-white","font-medium","px-10","py-1","rounded-md","ml-3"],["matRipple","",1,"w-[160px]","h-8","cursor-pointer","bg-blackColor","text-white","font-medium","px-10","py-1","rounded-md","ml-3",3,"matRippleColor"],[1,"text-blackColor/60","absolute","left-1","top-1/4","-translate-y-1/2"],[1,"h-[100vh]"],[1,"w-5","h-5","mt-[2px]","ml-3","border-2","border-white","border-t-transparent","rounded-full","animate-spin"],["matRipple","",1,"w-[160px]","h-8","cursor-pointer","bg-blackColor","text-white","font-medium","px-10","py-1","rounded-md","ml-3",3,"click","matRippleColor"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","flex","flex-col","justify-center","items-center"],[1,"cursor-default","hover:rotate-180","hover:text-blue-400","transition-all","duration-700","material-symbols-outlined","text-blackColor/50","text-[60px]"],["xmlns","http://www.w3.org/2000/svg","height","50px","viewBox","0 -960 960 960","width","50px","fill","currentColor"],["d","M440-183v-274L200-596v274l240 139Zm80 0 240-139v-274L520-457v274Zm-40-343 237-137-237-137-237 137 237 137ZM160-252q-19-11-29.5-29T120-321v-318q0-22 10.5-40t29.5-29l280-161q19-11 40-11t40 11l280 161q19 11 29.5 29t10.5 40v318q0 22-10.5 40T800-252L520-91q-19 11-40 11t-40-11L160-252Zm320-228Z"],[1,"text-blackColor/50","text-xl","font-semibold","ml-3",3,"innerHTML"],[1,"bg-white","rounded-md"],[3,"trackingNo"],[1,"bg-white","rounded-md","mt-3"]],template:function(e,s){e&1&&(d(0,"app-header"),n(1,"div",0)(2,"div",1)(3,"div",2)(4,"p",3),l(5,"Simple query"),o(),n(6,"p",4),l(7," Tracking your shipment by entering the tracking number. "),o()(),n(8,"div",5)(9,"div",6)(10,"input",7),ee("ngModelChange",function(r){return Y(s.trackingNumber,r)||(s.trackingNumber=r),r}),o(),h(11,st,2,0,"div",8)(12,rt,2,1,"div",9),n(13,"mat-icon",10),l(14,"search"),o()()(),h(15,mt,6,1,"div",11)(16,pt,4,2),o()(),d(17,"router-outlet")(18,"app-footer")),e&2&&(a(),f(s.loading?"h-[100svh]":"pb-[150px]"),a(9),X("ngModel",s.trackingNumber),a(),c(s.loading?11:12),a(4),c(s.hasData?16:15))},dependencies:[oe,le,B,R,G,M,de,pe,se,re,me,P],encapsulation:2})};export{ue as ShipmentSummaryGuestComponent};
